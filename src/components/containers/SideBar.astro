---
import { getLangFromUrl, getPathFromUrl } from '../../i18n/utils';
import BurgerMenu from '../BurgerMenu';
import MiddleBar from '../MiddleBar.astro';
import NavBar from '../NavBar';

const lang = getLangFromUrl(Astro.url);
const path = getPathFromUrl(Astro.url, lang);
---

<aside
	id='sidebar'
	class={`fixed top-0 z-40 w-full h-full flex flex-row flex-nowrap border-r border-dark-white md:w-2/4 transition-transform lg:w-1/3 lg:static lg:translate-x-0 max-w-[400px] duration-500 ease-in-out`}
>
	<BurgerMenu client:only='react' />
	<NavBar lang={lang} path={path} />
	<MiddleBar />
</aside>
<script>
	import { isOpen } from '../../nanostores/store';
	const side = document.getElementById('sidebar');

	// Listen to changes in the store, and show/hide the dialog accordingly
	isOpen.subscribe((open) => {
		if (open) {
			side?.classList.remove('-translate-x-full'); // Mueve hacia la izquierda
		} else {
			side?.classList.add('-translate-x-full'); // Vuelve a la posici√≥n original
		}
	});
</script>
